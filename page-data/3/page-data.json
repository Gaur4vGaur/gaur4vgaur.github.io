{"componentChunkName":"component---src-templates-index-js","path":"/3","result":{"data":{"site":{"siteMetadata":{"title":"Code Thoughts","subtitle":"Everything Should Be Made As Simple As Possible, But Not Simpler -Albert Einstein","author":"Gaurav Gaur","bio":"A passionate software developer and data science enthusiast"}},"allMarkdownRemark":{"edges":[{"node":{"excerpt":"Resilience is an essential consideration while designing microservices. A microservice should embrace failure, whenever it happens. A…","fields":{"slug":"/microservices/designing-resilient-microservices/","readingTime":{"text":"2 min read"}},"html":"<p>Resilience is an essential consideration while designing microservices. A microservice should embrace failure, whenever it happens. A microservice should be designed for all known failures. A few of the common known failures are:</p>\n<ul>\n<li>Timeout from downstream microservice, or a third party system failed to respond</li>\n<li>An exception occurred within a microservice or one of the downstream</li>\n<li>There can be network delays or network failure etc.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/75f4cea7e16e31bfea56de4050d5bcfe/0b533/img.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 111.48648648648648%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEV0lEQVQ4y22UaVBTVxTHLxJaWkaWQAJYxGKDIDuVYZTBGVvBFrUz9EM36rRT2lpDFYJAoBYRhGGpjKTWUoZQAhRKpSWQahGQOjCgIjQL2SBMwr6GgDxJSMjb+l6Cgq3vw5373jm/+z/nvnMOwP/3oDiK4RiCITiOERvii2ED5fQs1/UuklZsyxNsMRgOoxiKkUYEQ1Ecgcz6e1OmW2Ld36q1nZnD/lkioWbVjGzRgHAmXredh0EmiNC7NHbZvzOGJdDGVy0HlajpWQqXdOmupD6ZZoVUsgCkshWcg2C+EGpf6MlT5ZdrKv36okCLly/vy/AfOj2yx9zYQ3bMwfeuSCy5PFHeQPD+MYNu1ZR/R2ebpDxZV5kwnLC7N9Tm1qs2rfvtGkLdCxtdM8eo6SL7M4Mh7O4lCLLkaFHumzS9X7/wUe1M6HcaKlvmniLyKyxz6vIBgn2AH2hf/6bbNwMeGf+4MIWRxY10QWRGX4nlUhASnlrZyLs5G351woWtdM6Q0JiSPdxE0OEKWhm2Nw7Y/XTsBK88T1oRxcsJvpFo2+Xp2RxVLKqCjGubOau1puAStWO61DlV6PTZCK30a+qfwdT6Y87cIwGXh6LLutNGzxyVxzjefY0M5w9/Bi9u7pF2E+b0rACmgsqS0pNEDE5uaGPCpdsTp+rGA0sFr1zUOKWKfDMFu5vfAm27KC1BoN4vsSPbGjkJE5GfbumMbypj5Fb4dB0EAs/ohtLYKjmjYNqZLaGylB7ZtRSBD2jz2sEPAbyIAz8z1wxGUtl6b43LlfGyd0PvR1PafEBrAKXB17uo0OPCJJUtfokpsz3Hs+N70+qP2v8SEPg9d2/W8D3FkrVISHhYN5qnKLLv8gaCvYAf9HL1Ifq33ZRkJYU56MN6kFM3er1P/VXT7OHyZkahxDFtJDxHXHt3Bjz9aVcmOeAmzVawf8fvkS/URIcV/cqqmTpRKs2oVhLWgUnzx3WzEWWLtCwVNV3qcPoBt20ckBVjgd94eBw0ezs0RdBrYv2K739wXYGjCLQOr66ZySpEEdGE3q9wlKgFl/MSm097/+qf21KWrIym3hHH1/QHXGv0yh53TRV9zlWNzesJkxlBCbygQwuSZfbJYlrK4JGcgU7hwmZXWVvvWjcUVzm/r2CaON4hWRzG7ldPrZKwGSbW9hFDTIk8kauKyHqo1RmebUkc1euN+e2LDmy5e6aUuKrDOYPmDdikX0dheFkiNs1MEm4mM6qZ0yOWaJ8oWzpFZ0APciZszg45nBN6p/Sf+lGlvnhW8U7EHL9J5mYjO59M+MAw/JxhYO3NT2omTpbKgy8IWRVDpE517tIhO00AZT7EURq2Z1rQQtYWjPwXtnap0QQTthmdcWqRzGpduwilvQ3F7Fx4/UV1pNeaUm5xRZ+njG2u5AYlPcxD3cbiDw3s2NXj9Okv4mB8+yx4Fn5KElMGsU4m/SN8Wmb8reTx7QZ8/TGGINud/wWjFKS2q2kdDAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Designing Automated Microservice\"\n        title=\"Designing Automated Microservice\"\n        src=\"/static/75f4cea7e16e31bfea56de4050d5bcfe/0b533/img.png\"\n        srcset=\"/static/75f4cea7e16e31bfea56de4050d5bcfe/12f09/img.png 148w,\n/static/75f4cea7e16e31bfea56de4050d5bcfe/e4a3f/img.png 295w,\n/static/75f4cea7e16e31bfea56de4050d5bcfe/0b533/img.png 500w\"\n        sizes=\"(max-width: 500px) 100vw, 500px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Whatever is the type of failure, a well-designed microservice needs to embrace the failure. There are many ways in which a microservice can handle failures:</p>\n<ul>\n<li>microservice can fallback to default functionality. For eg consider a <code class=\"language-text\">suggestion</code> service for an e-commerce website that provides suggestions on the side pane based on the user’s past searches and order history. The <code class=\"language-text\">suggestion</code> service analyses the user data and feeds the side pane. If the <code class=\"language-text\">suggestion</code> service is down, then an alternative is to provide the most popular products from the <code class=\"language-text\">global suggestion</code> service rather than an error message on the side pane.</li>\n<li>another option is to degrade the functionality or direct users with alternatives. For eg, consider a microservice that aggregate user information from different sources. If one of the sources is getting overwhelmed with requests, one of the strategies could be to terminate all the requests to the failing source, providing it time to recover.  However, microservice can continue to gather data from other sources. The application can render incomplete information to users with an error message to come back for full details. Thus, avoiding complete dissatisfaction.</li>\n</ul>\n<p>Another way to make whole distributed systems, having multiple instances of microservices, resilient is by making the failed microservice(if it cannot be recovered) deregister itself, so the system is only aware of fully functioning microservices.</p>\n<p>We can observe all these errors/exceptions, using logging and monitoring tools, to make the service more resilient.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n</style>","frontmatter":{"title":"Designing Resilient Microservices","date":"October 29, 2017","subtitle":"Resilience is must","description":"Designing resilient microservices is must."}}},{"node":{"excerpt":"Another key design principle for microservices architecture is automation. Microservice architecture enables the teams to have frequent…","fields":{"slug":"/microservices/designing-automated-microservices/","readingTime":{"text":"2 min read"}},"html":"<p>Another key design principle for microservices architecture is <strong>automation</strong>. Microservice architecture enables the teams to have frequent releases and shorter time to production. But you certainly cannot ship your code into production without testing it. Whenever the code is released to production it must be tested. So we need automated tools that can test our code every time we deploy it to production.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c7349e028ce1804eb7de9900900f16eb/0b533/img.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74.32432432432432%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC/ElEQVQoz31SWUhUURg+DwUhEvRSUZQFbWYWBj0ULZZESUUSJogEEhQUVlSE0AJFkppalPjQQovhKFpJWjZmkeBY5pJL2jjq7MtdZu7cmblz595zzzn3dnWYtJf+h3O+n/N//3L+DxBCtISpqjpzxjFSfR1o4hUS6PhjPEaExEoJCE2zgIKJidFejOM+n6wnIqoKFUyFsTpyBz+dRx4CsW57xO+OKdqkV/g+wRdUD2wsas0vee+hedBiV461o+zm6PEmttMSkCXV4tFsNjd+uwnVpmDDFrlqAf/tCYM0NgyLHvWtOfNu69kGsKvkRnUrKO4ST7aLl9qDux87qzu8nznjVeudL94WWJtOapJwzRKlLIk1Vvv7+mT3VH5FZ+qp+gOXDQv3Xjt9/RkoN3FZL+lDzx17KidzmqqSTUnACOYbUwzNuaR8kXgLuG5v+5R3uD5jQ9vhzJtXKtfk12zOK12172JjSxewMcKFxskjD3+WvrEc/J671LQ2syc3uS09p/Oyxtihd6D/Xlnd1rTX2Xsfr1/1pjD/7eefxXfrjV/7pz9MU4kMFSoY1rB2buQaaF25+ONOUJd6rqtChlpY0348qHq0boUhO+v+6uWGwgJCsJZYCcCY6DeZccy8dVfHiYUNO/Z/OD9GO0UR//KI/d2DhqMHy1OWVWakDbe16mGKggiZISOMkSBgjiNCRPdjMclM2yNSNLF5DWGVczkGW5rdI8N/a8YNQAjFYJCEQgpD8Sgc0mKiBvF0K2pCLeqshuYoakYkEMYkSUfRCMt6x8K8h+ccU9bfFEXPKk8XD8ZqfNp/yIoixqIIKQEYkCJ6CwIOReRoFCqKmqg+20PCjQOgJw1Fwz6eCoi8FIMShBJC6pzB/mNAlmWbzeZyOM1Dgxb3eFQQaK+TEpgQx3kcU3SEEYI85XezIhdmA16vPSAGdcD4nBEoTJP9AX+AYV2DvUP8kM/ttP7qGYXjtN1hHTKNimZmwjpm7zHLVmbMYrZ0WyQHPfzbNd7rI+wfkhDeCSuQX54AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Designing Automated Microservice\"\n        title=\"Designing Automated Microservice\"\n        src=\"/static/c7349e028ce1804eb7de9900900f16eb/0b533/img.png\"\n        srcset=\"/static/c7349e028ce1804eb7de9900900f16eb/12f09/img.png 148w,\n/static/c7349e028ce1804eb7de9900900f16eb/e4a3f/img.png 295w,\n/static/c7349e028ce1804eb7de9900900f16eb/0b533/img.png 500w\"\n        sizes=\"(max-width: 500px) 100vw, 500px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>There are two categories of automation tools available.</p>\n<p><strong>Continuous integration(CI)</strong> tools integrates well with the source control systems. The tools compile the code, run unit test cases and run integration test cases whenever they detect a change in code base. The tools provide an immediate feedback on the change made to the code. The tools provide confidence to the team that recent code changes integrate well with the entire system. The tools are particularly helpful when many developers are working on the same code base, as the tools will alert the team if any breaking change is made. However, it is the onus of the team to write exhaustive test cases for the functionalities. These CI tools can also help to generate the code quality reports. The tools not only fires the test cases but also labels/version the code for next step, if all test cases are successful.</p>\n<p>Another set of tools are <strong>Continuous Deployment(CD)</strong> tools. The team can configure CD tools to deploy the microservice to various environments such as Dev, QA or Production. These tools work along with CI tools to deploy the code. Once all the test cases are successful, CD tools pick up the CI build and deploy it to the targeted environment.</p>\n<p>CI/CD tools help the teams to identify errors early by running automated tests and deployment pipelines. You can consider the tools such as Jenkins, Travis, MS Team foundation server etc to perform these jobs for your team.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n</style>","frontmatter":{"title":"Designing Automated Microservice","date":"October 15, 2017","subtitle":"Automated microservices are additional benefit to the team","description":"Designing automated microservices is a real benefit to the team."}}},{"node":{"excerpt":"A microservice must be autonomous. A microservice interacts with many other microservices or external systems to serve the user. But, any…","fields":{"slug":"/microservices/designing-autonomous-microservices/","readingTime":{"text":"2 min read"}},"html":"<p>A microservice must be <strong>autonomous</strong>. A microservice interacts with many other microservices or external systems to serve the user. But, any change in external systems should not force a change in the microservice. Similarly, any change in the microservice should not impact other microservices. All the microservices must adhere to the contracts and interfaces to their clients. Clearly defined contracts between services enable multiple teams to develop microservices in parallel and to deploy them independently.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ccbc8a92b4c3c82b3277238cedb88601/0b533/img.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.51351351351351%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAADCklEQVQoz3WRSUxTUQBFX0KcRUpFRFCIkYULXDjEHSa6MiasFKPRmKhx40ZNFCdMNdWCUCiVFqEMZWgVtCJthWIBARUjYnAAQQXUVqS2tLR/eu+/Pz1rXHsXN3dxV+cArnc359mH3Xno/l7WfU4mRJrrpl250JXHO/JgSx7bfERgokTi2IGT7JP92HUYOY5y1nx21AVCdSBiXi6aEwUNoAw7OUyUbw2zekAZV+GyJL5wMXcpdcE/Q8TofN2aYEkCLktE11eg0yDcrgVSa7JgzYDmjZHKXKb+UE2dfdKjITY1upuJ9BkR/U5YfdBhrenpbifuHXzVWlSeQZVvD+t2hZ16IFpXCibVgjFn+PVrn+2K67Hb119MqpchYzrWrBx33vk02O1taxx9M0ge5MCKFHR9+UzzmeH+Z4H2UsA1ZkPLlqg5d6Krwd9YIElEnHnM3s1iq7axRZu/2698aTNwAR+RGNiyA1Zmy2Wbg3XHP9tvB52VQIhMR3+Ox/zjQmAShXyyQiSeRqGvKDSFgtP8r0l+7qskSYos8cEJxvd2bKDdP+LFM29h5DcghNx3dNbbHfEhy3HY/42iKPHWGSyvRsf+nYHis/0cqvANGPBHG57u+6uKmpKmmoTJNjzeit+38u+dkoAVGUsBrzLroT914C/d+GOXGJ4FczVAblEptav5WwmMZY9ECJ4w+W8DZFLxJUno8hL6ciZPxT2HI3Z1qGKxWKHiNCnMqaUxTzVgmpL5+nRoXg91aqH5gPvpywn3RWRJQqZMWJoVu7kFF+cO9Xr7vY+IM4cypsKSTOZaNn1qXbSrFsjNybgmHRk3sBq12JBvved813aW1Cfzhgxat2nkRU/QeuFpa1OHo4l0bIX6VO5GFn0+mzqWFuusBYIpgdcnIq2KO7eIKtmDCYEjRl4HeK2KvpTywVn7Q5uPAj5IzeE7qejaCu6MmjmRRu9fFnOZAP1CRw+WUn362JOi2PN7caBi8AP1TEv1lVEefdRtiLqrMEKKCGM9N8IPC+ZtV0ONhUHL+ejY0B+eySNycAQFAAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Designing Observable Microservice\"\n        title=\"Designing Observable Microservice\"\n        src=\"/static/ccbc8a92b4c3c82b3277238cedb88601/0b533/img.png\"\n        srcset=\"/static/ccbc8a92b4c3c82b3277238cedb88601/12f09/img.png 148w,\n/static/ccbc8a92b4c3c82b3277238cedb88601/e4a3f/img.png 295w,\n/static/ccbc8a92b4c3c82b3277238cedb88601/0b533/img.png 500w\"\n        sizes=\"(max-width: 500px) 100vw, 500px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>One way to make a microservice autonomous, i.e., independently deployable and changeable, is by making them loosely coupled. The microservice should interact with other microservices over the network and should be stateless. We can use Open Communication Protocols such as REST over HTTP and architecture components such as message brokers, queues, a publish-subscribe mechanism to minimize the dependency between the services. The standard formats such as XMLs and JSONs can help to standardize the communication between the services. Teams should also avoid using shared resources such as shared libraries and shared databases.</p>\n<p>Another way to make microservices autonomous is by introducing versioning. The systems that we are working on today are increasing in size and complexity. It is not possible to upgrade each part of the system in a single release. As a result, there are scenarios when one of the microservice is upgraded while its client is still waiting for business decisions. In such scenarios, we need to make sure that even if there are changes in microservices, then those changes should be backwards compatible. The team working on a microservice should avoid making any breaking changes. One way to deal with this problem is to introduce versions. The clients that have upgraded themselves can use later versions while others can keep using the older version of the microservice. This allows consumers to slowly migrate over time from the old version to the new version. You may have to deploy both old and new version of the microservice. Another way is to include both old endpoints and new endpoints in the service. These old points are no more than a wrapper around the new endpoints. This will prevent breaking any existing contract. However, over a while, all the clients should move to new endpoints.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n</style>","frontmatter":{"title":"Designing Autonomous Microservice","date":"September 28, 2017","subtitle":"Microservices must be self-sufficient and self-governing","description":"Designing an autonomous microservices. The article discusses why and how to design self-sufficient and self-governing services"}}},{"node":{"excerpt":"The microservice architecture leads to a distributed system that is scalable, flexible and reliable. However, it comes at an expense of…","fields":{"slug":"/microservices/designing-observable-microservices/","readingTime":{"text":"2 min read"}},"html":"<p>The microservice architecture leads to a distributed system that is scalable, flexible and reliable. However, it comes at an expense of added complexity. The microservices interact with each other to complete user transactions. Since a lot is going on in the system, keeping a check on the system health is vital. So another key consideration to design a microservice is <strong>observability</strong>. The team must be aware of the activities that are happening within the system.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/75ec25787a4c8b30bf8a6a6de78e3313/0b533/img.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 79.72972972972973%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsTAAALEwEAmpwYAAACaUlEQVQoz42Q3U/TYBSH+48Y2dq+3fp2H0zYRzsYEXQDQQgXOpCFEPm4Md5pvDMmGL//C++89tJ4QUhkkW1OgRXI2LqWtoMLGNu6MRmeblFjosMnT5rT5D2/876HGJ8V+kO8t9fXxv9/8ALP8wFiYCSA3S47y2KMHQ4HQogCaKoDNKJtdhvHcQTGLPzZsY0maYZhaIToVisUiEF0C9TiVw1fkqJYliVcHlfopjA2Hw4O+90+l3/I29Pn6fa5SCtJkVTrtJmF/sDMN5sDV33zz6fnlqfmnkanHk1GH05M3h+dfXxLiPg5NyYtpLXLyjrsVgvZdckCWi5bIRc0m4PXA4tvYnefTYMLr2ILL2fmX8wsvY7NLUdnn9yevDc6vjQcfTAxvhgJ3xmMxAYDQ17nFQfrtANEd68nGA5ABCiA19r6g2G+L8L33xBMR4TQaNB0LAiH/QPeXr7H7XITg0MhjN00yVBWBDuzIRtD/9aJHU7sxHYOUQwDkrBShsMc6PF4iPS3VOrz+/jqu/jK2/jaSjKZSiYTicT6WnxtY3NjZ2cb3N7ZzogZEzHTLraAzBZRqxln9cPTqn5alRoN47xF86wJnl8EUa4YRT0n579KBV1V1aOjo+Pj41KpVC6Xm5Dwk+9/g2ieneqFT/tSWld3VVU5ODisVConQOkECjjRaTKkF4uqJm9ohaSiyJqmG1Wj3d8e3qkZrqRqxX1ZlHc/SHtpvXhQr9XqtXq1Wm00Gs2OwOSmquqaIur5j5qyqSjms2EmvNwwjAsWJsuFNPBlPZ1cTSTiqVRKFMVsNpvPS7lcTpKkbHbvX/4A91Akurnf9uMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Designing Observable Microservice\"\n        title=\"Designing Observable Microservice\"\n        src=\"/static/75ec25787a4c8b30bf8a6a6de78e3313/0b533/img.png\"\n        srcset=\"/static/75ec25787a4c8b30bf8a6a6de78e3313/12f09/img.png 148w,\n/static/75ec25787a4c8b30bf8a6a6de78e3313/e4a3f/img.png 295w,\n/static/75ec25787a4c8b30bf8a6a6de78e3313/0b533/img.png 500w\"\n        sizes=\"(max-width: 500px) 100vw, 500px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>All the microservices with in the system should have centralised monitoring and logging. The data is useful to diagnose problems, if any, and provide quick resolutions. There are many tools available in the market that can help you to monitor the microservices. Some of the popular tools are ELK stack, Splunk, Prometheus etc. These tools can help the team gather stats. This collected data then can be utilised for:</p>\n<ul>\n<li>capacity planning, scaling up or down the system</li>\n<li>observing user behaviours, to diagnose if users are facing any issue in any specific flow</li>\n<li>potential system health issues. CPU usage, memory usage, disk usage etc can provide valuable feedback to the team about the bottlenecks if any</li>\n<li>discovering causes of timeouts, exceptions, and errors happening in the system</li>\n</ul>\n<p>While designing a microservice, the team should decide upon:</p>\n<ul>\n<li>the information that needs to be logged. The team should consult security architects to verify the sensitivity of data getting logged</li>\n<li>structure of logs. The information would help the team to debug any potential bug</li>\n<li>valid correlation id for transactions. The correlation id would help the team to trace the transactions in a distributed environment.</li>\n</ul>\n<p>The team should thoughtfully insert meaningful logs and audit events within the code. A consistent log format will allow the team to query the logging information. The team can then query for specific patterns and specific error codes using a logging tool.</p>\n<p>Teams can also configure alerts using tools such as Pagerduty, Opsgenie etc. The tools can send out some early alerts as emails, slack messages and sms to the team. An example alert could be if there are 25 timeout exceptions in the last 10 min. The tools can also help the team to log these as incidents to be investigated.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n</style>","frontmatter":{"title":"Designing Observable Microservice","date":"September 08, 2017","subtitle":"Microservices must be monitored","description":"Designing an observable microservices. The article discusses why and how microservices should be monitored"}}},{"node":{"excerpt":"A microservice must have high cohesion. Microservice should focus on single functionality and should be consistent in terms of functionality…","fields":{"slug":"/microservices/designing-high-cohesion-microservices/","readingTime":{"text":"2 min read"}},"html":"<p>A microservice must have <strong>high cohesion</strong>. Microservice should focus on single functionality and should be consistent in terms of functionality, input and outputs. Consider it as a self-contained unit managing its own lifecycle.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2b1fb1baa5f6d3df7f4e33bed9972a60/0b533/img.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.89189189189189%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAACbklEQVQoz3VRXW/SYBTuP/Bf+Au8MNmN3mj8yG6MxiWLcfFC4zQmW2IkIZFsIZhlS9wiWZSMfZlNFhIFBpsVQWUTOtgssIKsBddRoGVAYUCh37ZUCDc+F+fNe857zvO8zwEkSVaQb4hj3trCflWWtYRySKIoSh0o12abb7G8KMkMq145XlQiQDd5P1xcDBYH3mbvrWa2wvmdOKX0yt0RSqy3uMu6j8NGh9VLjVlQKFX5BFfTxRbgCBau63d1lv3p76TZi49MQdeeg1myls9lYRgGQTCJHDKcdOHR0pWni4al+PBEwLWXW4EqCaIBoMSZafnA5MRuORujjsLMh9icDWZZnqJIFMMgCMIwTCEvlusPXm4OjdvWfpzMB+jocVWVLaq6pGSJvbmaN3wmJZHvfburXI3Ks9FJ59CzJTBWeg1Sx2RDa5YEQS0XKvVoPCEoENX3mmEatCksJ+AnRKl02uJEqZMEegwcy3o8bo7j5Z5dfRA7CtMYmkome0YCffKkSCQi/wfabtAMjqRUC9q8ukZA+xKSpf3Rk/xp/SDDNNtCjm432rwyT+jI1ngUscYg88RToc7amhf/mAfG7eduTBvXU4MGeBlMr+zRIEJ31cmcIG5HqLUAcWeNuGRGrT78vTdTrDCAVre4ft1+sT65ENK/C9t3CVeUxorM0e8kkkhSBQL5U7r7KjJiCsz6iDc7pN4au/h4y+47UpmFjhm6uW/nr86sfElNfa35DstKBtoLh0KhRAIp0zWbL2N2Ju67a4O20vw2Zt6ACaoGdHaoNnt/ooZZN0rQm3AVp5py37q1k5fkCX/54QZOVhmt+hcvGJ/cUEQo/wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Designing High Cohesive Microservice\"\n        title=\"Designing High Cohesive Microservice\"\n        src=\"/static/2b1fb1baa5f6d3df7f4e33bed9972a60/0b533/img.png\"\n        srcset=\"/static/2b1fb1baa5f6d3df7f4e33bed9972a60/12f09/img.png 148w,\n/static/2b1fb1baa5f6d3df7f4e33bed9972a60/e4a3f/img.png 295w,\n/static/2b1fb1baa5f6d3df7f4e33bed9972a60/0b533/img.png 500w\"\n        sizes=\"(max-width: 500px) 100vw, 500px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Let us refer to <a href=\"https://github.com/hmrc/email-verification\" target=\"_blank\">hmrc/email-verification</a> as an example. The service has a single focus on verifying the emails. The microservice verifies the email address by firing the verification link to the provided email address. This service encapsulates all the logic/functionality of email verification. The microservice has only one reason to change. The service will be modified only if it needs to be upgraded or if there is a change in the business logic to verify the email.</p>\n<p>The idea of the Single Responsibility Principle is adopted from the object-oriented world. The principle of the service to be focused on specific business reason and to be highly cohesive. As the microservice is cohesive it is <strong>scalable, flexible and reliable</strong>.</p>\n<p>The first of designing a microservice is to identify its focussed use case. We can determine the responsibility of the microservice either: by business requirements for eg email-verification needs to verify the email, or by a domain, where the focus is to create, update, fetch or delete the data.\nLet us refer to another service <a href=\"https://github.com/hmrc/tamc\" target=\"_blank\">hmrc/tamc</a>. The service allows a married couple to check if they are eligible for Marriage Allowance. The service concentrates on creating/updating/listing the relationships. The service requires the changes when government rules regarding the marriage allowance change for eg allowances going up or down. The microservice deals only with the calculation of marriage allowance, however, there is a separate microservice written to display marriage allowance data to users.</p>\n<p>This enables the marriage allowance team to enhance and deploy specific parts of the system.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n</style>","frontmatter":{"title":"Designing High Cohesion Microservice","date":"August 05, 2017","subtitle":"Designing a highly cohesive and self aggregated microservice","description":"Designing a highly cohesive microservices. The article discussed couple of examples of live and well-defined self aggregated microservices"}}}]},"profilePic":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHHSeqLueMtRQX/xAAcEAACAQUBAAAAAAAAAAAAAAABAgMABBESEyL/2gAIAQEAAQUCYdLmSKIKo85UTPMhVbk4amGy6iv/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAcEAEAAQQDAAAAAAAAAAAAAAABAAIQEiERMVH/2gAIAQEABj8CwXUcOciEqXfkSjU6LUrb/8QAGhAAAwEBAQEAAAAAAAAAAAAAAAERITFBUf/aAAgBAQABPyHfCCEr6CmydRIf0JgZ0RVN0OhSRvKIv//aAAwDAQACAAMAAAAQP/jB/8QAFhEBAQEAAAAAAAAAAAAAAAAAEQAQ/9oACAEDAQE/ECN//8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAGxABAAMBAQEBAAAAAAAAAAAAAQARITFBgWH/2gAIAQEAAT8Q3XEM2s8g5UFO9b7fKni0OkSXGYXpWfdJcB9qp7ypzMgRSyJu/IFBramp+zaBQNT/2Q==","aspectRatio":1,"src":"/static/d15f09c08a7b6f8c8eee4a58db8ba793/8295c/profile-pic.jpg","srcSet":"/static/d15f09c08a7b6f8c8eee4a58db8ba793/99438/profile-pic.jpg 50w,\n/static/d15f09c08a7b6f8c8eee4a58db8ba793/b315d/profile-pic.jpg 100w,\n/static/d15f09c08a7b6f8c8eee4a58db8ba793/8295c/profile-pic.jpg 200w,\n/static/d15f09c08a7b6f8c8eee4a58db8ba793/1bb83/profile-pic.jpg 283w","sizes":"(max-width: 200px) 100vw, 200px"}}}},"pageContext":{"limit":5,"skip":10,"isFirstPage":false,"isLastPage":false,"currentPage":3,"totalPages":5}},"staticQueryHashes":["786959418","852313850"]}